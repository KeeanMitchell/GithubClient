"use strict";
var __importDefault = (this && this.__importDefault) || function (mod) {
    return (mod && mod.__esModule) ? mod : { "default": mod };
};
var _a, _b;
Object.defineProperty(exports, "__esModule", { value: true });
const express_1 = __importDefault(require("express"));
const gitcontroller_1 = require("../controllers/gitcontroller");
const supabaseservice_1 = require("../services/supabaseservice");
const gitservice_1 = require("../services/gitservice");
const dotenv_1 = __importDefault(require("dotenv"));
const router = express_1.default.Router();
dotenv_1.default.config();
const key = (_a = process.env.SUPABASE_KEY) !== null && _a !== void 0 ? _a : '';
const url = (_b = process.env.SUPABASE_URL) !== null && _b !== void 0 ? _b : '';
const supabaseService = new supabaseservice_1.SupabaseRepo(url, key);
const githubService = new gitservice_1.GitHubRepo();
const gitController = new gitcontroller_1.GitController(supabaseService, githubService);
router.post('/contributors', gitController.getContributors);
router.post('/contributor/commits', gitController.getCommitsForContributor);
router.post('/repos', gitController.getReposForOwner);
router.post('/test/save/supabase', gitController.saveSupabase);
router.post('/test/update/supabase', gitController.updateSupabase);
router.post('/test/fetch/supabase', gitController.fetchSupabase);
exports.default = router;
